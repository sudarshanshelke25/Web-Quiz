const programmingQuestions = [
    {
        question: "Which language is primarily used for web development?",
        options: ["Python", "JavaScript", "C++", "Swift"],
        answer: "JavaScript"
    },
    {
        question: "What does CSS stand for?",
        options: ["Cascading Style Sheets", "Computer Style Sheets", "Creative Style Sheets", "Colorful Style Sheets"],
        answer: "Cascading Style Sheets"
    },
    {
        question: "Which of the following is a JavaScript framework?",
        options: ["Django", "Angular", "Flask", "Ruby on Rails"],
        answer: "Angular"
    },
    {
        question: "What does SQL stand for?",
        options: ["Structured Query Language", "Structured Question Language", "Simplified Query Language", "Simplified Question Language"],
        answer: "Structured Query Language"
    },
    {
        question: "Which HTML tag is used to define an unordered list?",
        options: ["<ul>", "<ol>", "<li>", "<list>"],
        answer: "<ul>"
    },
    {
        question: "Which language is commonly used for Android app development?",
        options: ["Swift", "Kotlin", "C#", "PHP"],
        answer: "Kotlin"
    },
    {
        question: "What does HTTP stand for?",
        options: ["HyperText Transfer Protocol", "HyperText Transmission Protocol", "HyperText Transfer Package", "HyperText Transmission Package"],
        answer: "HyperText Transfer Protocol"
    },
    {
        question: "Which company developed the Python language?",
        options: ["Google", "Microsoft", "Apple", "Guido van Rossum"],
        answer: "Guido van Rossum"
    },
    {
        question: "What is the file extension for JavaScript files?",
        options: [".java", ".js", ".jsx", ".script"],
        answer: ".js"
    },
    {
        question: "Which of the following is a NoSQL database?",
        options: ["MySQL", "PostgreSQL", "MongoDB", "SQLite"],
        answer: "MongoDB"
    }
];

const mathQuestions = [
    {
        question: "What is the value of π (pi) to two decimal places?",
        options: ["3.14", "3.15", "3.16", "3.17"],
        answer: "3.14"
    },
    {
        question: "What is the square root of 64?",
        options: ["6", "7", "8", "9"],
        answer: "8"
    },
    {
        question: "What is the derivative of x^2 with respect to x?",
        options: ["2x", "x", "x^2", "2"],
        answer: "2x"
    },
    {
        question: "What is the value of the expression 2+2*2?",
        options: ["6", "8", "4", "10"],
        answer: "6"
    },
    {
        question: "What is the area of a circle with radius 3?",
        options: ["9π", "6π", "3π", "12π"],
        answer: "9π"
    },
    {
        question: "What is the sum of the angles in a triangle?",
        options: ["180 degrees", "360 degrees", "90 degrees", "270 degrees"],
        answer: "180 degrees"
    },
    {
        question: "What is the solution to the equation x + 5 = 12?",
        options: ["5", "7", "12", "17"],
        answer: "7"
    },
    {
        question: "What is the integral of 1/x with respect to x?",
        options: ["ln(x)", "x^2", "1/x", "e^x"],
        answer: "ln(x)"
    },
    {
        question: "What is the value of the factorial of 5 (5!)?",
        options: ["120", "60", "24", "12"],
        answer: "120"
    },
    {
        question: "What is the Pythagorean theorem?",
        options: ["a^2 + b^2 = c^2", "a^2 + b = c^2", "a + b^2 = c^2", "a^2 + b^2 = c"],
        answer: "a^2 + b^2 = c^2"
    }
];

const scienceQuestions = [
    {
        question: "What is the chemical symbol for water?",
        options: ["HO", "O2", "H2O", "HO2"],
        answer: "H2O"
    },
    {
        question: "What planet is known as the Red Planet?",
        options: ["Earth", "Mars", "Jupiter", "Saturn"],
        answer: "Mars"
    },
    {
        question: "What is the process by which plants make their food?",
        options: ["Respiration", "Photosynthesis", "Digestion", "Fermentation"],
        answer: "Photosynthesis"
    },
    {
        question: "What gas do plants absorb from the atmosphere?",
        options: ["Oxygen", "Nitrogen", "Carbon Dioxide", "Hydrogen"],
        answer: "Carbon Dioxide"
    },
    {
        question: "What is the hardest natural substance on Earth?",
        options: ["Gold", "Iron", "Diamond", "Silver"],
        answer: "Diamond"
    },
    {
        question: "What force keeps us on the ground?",
        options: ["Magnetism", "Gravity", "Friction", "Electricity"],
        answer: "Gravity"
    },
    {
        question: "What is the primary gas in the Earth's atmosphere?",
        options: ["Oxygen", "Nitrogen", "Carbon Dioxide", "Helium"],
        answer: "Nitrogen"
    },
    {
        question: "What is the center of an atom called?",
        options: ["Electron", "Proton", "Neutron", "Nucleus"],
        answer: "Nucleus"
    },
    {
        question: "What is the boiling point of water at sea level?",
        options: ["90°C", "100°C", "110°C", "120°C"],
        answer: "100°C"
    },
    {
        question: "What is the most abundant element in the universe?",
        options: ["Oxygen", "Carbon", "Hydrogen", "Nitrogen"],
        answer: "Hydrogen"
    }
];

const historyQuestions = [
    {
        question: "Who was the first President of the United States?",
        options: ["Thomas Jefferson", "Abraham Lincoln", "George Washington", "John Adams"],
        answer: "George Washington"
    },
    {
        question: "In which year did World War II end?",
        options: ["1942", "1945", "1948", "1950"],
        answer: "1945"
    },
    {
        question: "Which ancient civilization built the pyramids?",
        options: ["Romans", "Greeks", "Egyptians", "Mayans"],
        answer: "Egyptians"
    },
    {
        question: "Who wrote the 'I Have a Dream' speech?",
        options: ["Malcolm X", "Martin Luther King Jr.", "John F. Kennedy", "Rosa Parks"],
        answer: "Martin Luther King Jr."
    },
    {
        question: "What was the primary cause of the American Civil War?",
        options: ["Taxation", "Slavery", "Territorial expansion", "Religious freedom"],
        answer: "Slavery"
    },
    {
        question: "Who was the first emperor of Rome?",
        options: ["Julius Caesar", "Augustus", "Nero", "Caligula"],
        answer: "Augustus"
    },
    {
        question: "What wall divided East and West Berlin from 1961 to 1989?",
        options: ["Great Wall of China", "Berlin Wall", "Iron Curtain", "Western Wall"],
        answer: "Berlin Wall"
    },
    {
        question: "Who was the leader of the Soviet Union during World War II?",
        options: ["Vladimir Lenin", "Joseph Stalin", "Nikita Khrushchev", "Leonid Brezhnev"],
        answer: "Joseph Stalin"
    },
    {
        question: "Which event marked the beginning of the Great Depression?",
        options: ["Black Tuesday", "Pearl Harbor", "D-Day", "The New Deal"],
        answer: "Black Tuesday"
    },
    {
        question: "Who was the British Prime Minister during most of World War II?",
        options: ["Winston Churchill", "Neville Chamberlain", "Margaret Thatcher", "Tony Blair"],
        answer: "Winston Churchill"
    }
];

const geographyQuestions = [
    {
        question: "What is the largest continent by area?",
        options: ["Africa", "Asia", "Europe", "North America"],
        answer: "Asia"
    },
    {
        question: "What is the capital city of France?",
        options: ["London", "Berlin", "Madrid", "Paris"],
        answer: "Paris"
    },
    {
        question: "Which is the longest river in the world?",
        options: ["Amazon River", "Nile River", "Yangtze River", "Mississippi River"],
        answer: "Nile River"
    },
    {
        question: "Which country has the most natural lakes?",
        options: ["USA", "Canada", "Australia", "Russia"],
        answer: "Canada"
    },
    {
        question: "Mount Everest is located in which mountain range?",
        options: ["Andes", "Alps", "Rockies", "Himalayas"],
        answer: "Himalayas"
    },
    {
        question: "What is the smallest country in the world?",
        options: ["Monaco", "San Marino", "Vatican City", "Liechtenstein"],
        answer: "Vatican City"
    },
    {
        question: "Which ocean is the largest?",
        options: ["Atlantic Ocean", "Indian Ocean", "Arctic Ocean", "Pacific Ocean"],
        answer: "Pacific Ocean"
    },
    {
        question: "What is the official language of Brazil?",
        options: ["Spanish", "Portuguese", "English", "French"],
        answer: "Portuguese"
    },
    {
        question: "What desert is the largest in the world?",
        options: ["Sahara", "Arabian", "Gobi", "Kalahari"],
        answer: "Sahara"
    },
    {
        question: "Which US state is known as the 'Sunshine State'?",
        options: ["California", "Texas", "Florida", "Hawaii"],
        answer: "Florida"
    }
];

const sportsQuestions = [
    {
        question: "Which country won the FIFA World Cup in 2018?",
        options: ["Germany", "Brazil", "France", "Argentina"],
        answer: "France"
    },
    {
        question: "Who holds the record for the most home runs in a single MLB season?",
        options: ["Barry Bonds", "Babe Ruth", "Mark McGwire", "Hank Aaron"],
        answer: "Barry Bonds"
    },
    {
        question: "In which sport is the term 'love' used?",
        options: ["Basketball", "Tennis", "Soccer", "Cricket"],
        answer: "Tennis"
    },
    {
        question: "Which country hosted the 2016 Summer Olympics?",
        options: ["China", "Brazil", "United Kingdom", "Russia"],
        answer: "Brazil"
    },
    {
        question: "What is the national sport of Japan?",
        options: ["Baseball", "Sumo Wrestling", "Soccer", "Karate"],
        answer: "Sumo Wrestling"
    },
    {
        question: "Who has won the most Grand Slam titles in men's tennis?",
        options: ["Roger Federer", "Rafael Nadal", "Novak Djokovic", "Pete Sampras"],
        answer: "Rafael Nadal"
    },
    {
        question: "Which country won the first ever World Cup in 1930?",
        options: ["Brazil", "Argentina", "Uruguay", "Italy"],
        answer: "Uruguay"
    },
    {
        question: "Which NFL team has won the most Super Bowls?",
        options: ["Dallas Cowboys", "New England Patriots", "Pittsburgh Steelers", "San Francisco 49ers"],
        answer: "New England Patriots"
    },
    {
        question: "In golf, what is the term for a score of one under par on a hole?",
        options: ["Birdie", "Eagle", "Bogey", "Par"],
        answer: "Birdie"
    },
    {
        question: "Which basketball player is known as 'The King'?",
        options: ["Michael Jordan", "LeBron James", "Kobe Bryant", "Shaquille O'Neal"],
        answer: "LeBron James"
    }
];

const categoryList = [ 
    {
        id: 1,
        name: 'programming',
    },
    {
        id: 2,
        name: 'science',
    },
    {
        id: 3,
        name: 'mathmatics',
    },
    {
        id: 4,
        name: 'history',
    },
    {
        id: 5,
        name: 'geography',
    },
    {
        id: 6,
        name: 'sports',
    },
];

// Get All Containers 
const home = document.getElementById('home');
const start = document.getElementById('start');
const test = document.getElementById('test');
const result = document.getElementById('result');

// Function to Display Home Container
const displayHome = () => {
    home.style.display = 'flex';
    start.style.display = 'none';
    test.style.display = 'none';
    result.style.display = 'none';
}

// Function to Display Start Container
const displayStart = () => {
    home.style.display = 'none';
    start.style.display = 'flex';
    test.style.display = 'none';
    result.style.display = 'none';
}

// Function to Display Test Container
const displayTest = () => {
    home.style.display = 'none';
    start.style.display = 'none';
    test.style.display = 'flex';
    result.style.display = 'none';
}

// Function to Display Result Container
const displayResult = () => {
    home.style.display = 'none';
    start.style.display = 'none';
    test.style.display = 'none';
    result.style.display = 'flex';
}

// Get User Name
let userName = document.getElementById('user-name');
// Get Category Container
const categories = document.getElementById('categories');
// Get Selected Category
const currentCategory = document.getElementById('current-category');

// Get Timer And Score
const quizTimer = document.getElementById('quiz-timer');
const quizScore = document.getElementById('quiz-score');
// Get Question Nummber
const questionCount = document.getElementById('question-count');
// Get Question Text
const question = document.getElementById('question');
// Get Optiion Container
const options = document.getElementById('options');

// Get All Buttons 
const enterBtn = document.getElementById('enter-btn');
const startBtn = document.getElementById('start-btn');
const nextBtn = document.getElementById('next-btn');
const resultBtn = document.getElementById('result-btn');
const againBtn = document.getElementById('again-btn');
const homeBtn = document.getElementById('home-btn');

// Result Feilds
const currentUser = document.getElementById('current-user');
const userScore = document.getElementById('user-score');
const totalTime = document.getElementById('total-time');
const totalQuestions = document.getElementById('total-questions');
const attemptQuestions = document.getElementById('attempt-questions');
const correctQuestions = document.getElementById('correct-questions');
const wrongQuestions = document.getElementById('wrong-questions');
const userPercentage = document.getElementById('user-percentage');

// User and Quiz Informatin
let userResult = {
    username: '',
    totalTime: 0,
    totalQuestions: 0,
    attempt: 0,
    notattempt: 0,
    correct: 0,
    wrong: 0,
    percentage: 0,
    score: 0,
}

let currentQuiz ;
let currentIndex = 0;
let questionIndex = 0;
let questionTimer = 10;
let questionTimerID = null;
let totalTimer = 0;
let totalTimerID = null; 

displayHome()

// Function to Show All the Categories on Home Page
const showCategories = () => {
    categories.textContent = '';
    categoryList.forEach(categoty => {
        const categoryDiv = document.createElement('li');
        categoryDiv.classList.add('category');
        categoryDiv.dataset.index = categoty.id;
        categoryDiv.textContent = `${categoty.name}`;
        categories.appendChild(categoryDiv);

        categoryDiv.addEventListener('click', () => {
            if (categoryDiv.classList.contains('select-category')) {
                categoryDiv.classList.remove('select-category');
            } else {
                categoryDiv.classList.add('select-category');
                selectCategory(categoryDiv.dataset.index);
            }
        });
    });
};
showCategories();


// Function to Select the Category For Quiz
const selectCategory = (currentIndex) => {
    currentCategory.textContent = '';
    switch (currentIndex) {
        case '1' :
            currentCategory.textContent = 'programming',
            currentQuiz = programmingQuestions;
            break;

        case '2' :
            currentCategory.textContent = 'science',
            currentQuiz = scienceQuestions;
            break;
        
        case '3' :
            currentCategory.textContent = 'mathmatics',
            currentQuiz = mathQuestions;
            break;

        case '4' :
            currentCategory.textContent = 'history',
            currentQuiz = historyQuestions;
            break;

        case '5' :
            currentCategory.textContent = 'geography',
            currentQuiz = geographyQuestions;
            break;

        case '6' :
            currentCategory.textContent = 'sports',
            currentQuiz = sportsQuestions;
            break;

        default :
            currentCategory.textContent = 'programming',
            currentQuiz = programmingQuestions;
    }
    displayStart();
};

// Function to Start Question Timmer
const startQuestionTimer = () => {
    clearInterval(questionTimerID);
    quizTimer.textContent = `${questionTimer}`;
    const countDown = () => {
        questionTimer -= 1;
        quizTimer.textContent = `${questionTimer}`;

        if (questionTimer == 0) {
            checkAnswers(currentQuiz);
            questionIndex += 1;
            questionTimer = 10;
            showQuestions(currentQuiz);
        }
    }
    questionTimerID = setInterval(countDown, 1000);
}

// Function to Stop Question Timmer
const stopQuestionTimer = () => {
    clearInterval(questionTimerID);
}

// Function to Start Total Timmer
const startTotalTimer = () => {
    clearInterval(totalTimerID);
    const countDown = () => {
        totalTimer += 1;
        userResult.totalTime = totalTimer;
    }
    totalTimerID = setInterval(countDown, 1000);
}

// Function to Stop Total Timmer
const stopTotalTimer = () => {
    clearInterval(totalTimerID);
}

// Function to Show the Option of Question
const showOptions = (optionList) => {
    options.textContent = '';
    optionList.forEach(option => {
        const optionDiv = document.createElement('li');
        optionDiv.classList.add('option');
        // optionDiv.dataset.index = categoty.id;
        optionDiv.textContent = `${option}`;
        options.appendChild(optionDiv);

        optionDiv.addEventListener('click', () => {
            if (optionDiv.classList.contains('select-option')) {
                optionDiv.classList.remove('select-option');
            } else {
                optionDiv.classList.add('select-option');
            }
        });
    });
};

// Function to Show Question
const showQuestions = (currentQuiz) => {
    if (questionIndex == currentQuiz.length) {
        stopQuestionTimer();
        stopTotalTimer();
        nextBtn.style.display = 'none';
        resultBtn.style.display = 'block';
        questionIndex = 0;
    } else {
        const currentQuestion = currentQuiz[questionIndex];

        questionCount.textContent = `${questionIndex + 1}/${currentQuiz.length}`;
        question.textContent = `${currentQuestion.question}`;

        // Display Options
        options.textContent = "";
        showOptions(currentQuestion.options);
        startQuestionTimer();
    }
};

// Function to Check Question Answer
const checkAnswers = (currentQuiz) => {
    if (questionIndex > currentQuiz.length) {
        console.log(currentIndex);
        console.log(currentQuiz.length);

        console.log(`You are Complete the Quiz, For Result Click on Show Result`)
    } else {
        const selectedOption = document.querySelector('.select-option');

        if (selectedOption) {
            userResult.attempt += 1;
            if (selectedOption.textContent === currentQuiz[questionIndex].answer) {
                userResult.correct += 1;
            } else {
                userResult.wrong += 1;
            }
        } else {
            userResult.notattempt += 1;
        }
 
        userResult.score = userResult.correct * 10;
        quizScore.textContent = `${userResult.score}`;
        userResult.totalQuestions = currentQuiz.length;
        userResult.percentage = (userResult.correct / userResult.attempt) * 100 ;
        console.log(userResult);
    }
};

// Function to Show Result
const showUserResult = (userResult) => {
    currentUser.textContent = `${userResult.username}`;
    userScore.textContent = `${userResult.score}`;
    totalTime.textContent = `${userResult.totalTime}`;
    totalQuestions.textContent = `${userResult.totalQuestions}`;
    attemptQuestions.textContent = `${userResult.attempt}`;
    correctQuestions.textContent = `${userResult.correct}`;
    wrongQuestions.textContent = `${userResult.wrong}`;
    userPercentage.textContent = `${userResult.percentage.toFixed(2)}`;
};

// Function to Reset User Result
const resetUserResult = () => {
    userResult.totalTime = 0;
    userResult.totalQuestions = 0;
    userResult.attempt = 0;
    userResult.notattempt = 0;
    userResult.correct = 0;
    userResult.wrong = 0;
    userResult.percentage = 0;
    userResult.score = 0;
    userResult.timer = 0;
}

resultBtn.style.display = 'none';

// Event Listener on Enter Btn
enterBtn.addEventListener('click' , () => {
    userResult.username = userName.value;
});

// Event Listener on Start Quiz Btn
startBtn.addEventListener('click' , () => {
    displayTest();
    resetUserResult();
    questionIndex = 0;
    if (currentQuiz) {
        questionTimer = 10;
        showQuestions(currentQuiz);
        startTotalTimer();
    } else {
        alert('Please Select Your Category for Quiz!');
    }  
});

// Event Listener on Next Que. Btn
nextBtn.addEventListener('click' , () => {
    checkAnswers(currentQuiz);
    questionIndex += 1;
    questionTimer = 10;
    showQuestions(currentQuiz);
});

// Event Listener on Show Result Btn
resultBtn.addEventListener('click' , () => {
    displayResult();
    showUserResult(userResult);
});

// Event Listener on Start Again Btn
againBtn.addEventListener('click' , () => {
    displayStart();
    resultBtn.style.display = 'none';
    nextBtn.style.display = 'block';
});

// Event Listener on Go To Home Btn
homeBtn.addEventListener('click' , () => {
    displayHome();
    resultBtn.style.display = 'none';
    nextBtn.style.display = 'block';
});